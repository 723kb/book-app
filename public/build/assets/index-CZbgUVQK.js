import{j as e,r,W as V,Y as $}from"./app-YDztLFLk.js";import{A as G}from"./AuthenticatedLayout-CLJ2yakE.js";import{T as w,I as x}from"./TextInput-DsC6TvVv.js";import{M as C,S as k,D as W}from"./DangerButton-DTJ5WH3R.js";import{P as Y}from"./PrimaryButton-BKKyyy9B.js";import{u as _}from"./useTranslation-CQ5CI7WT.js";import"./ApplicationLogo-BTCgpWwP.js";import"./transition-D4IOCPZ-.js";function B({className:c="",disabled:a,children:n,...s}){return e.jsx("button",{...s,className:`inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150 ${a&&"opacity-25"} `+c,disabled:a,children:n})}const S=r.forwardRef(function({type:a="text",className:n="",isFocused:s=!1,...g},o){const l=o||r.useRef();return r.useEffect(()=>{s&&l.current.focus()},[]),e.jsx("textarea",{...g,type:a,className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm "+n,ref:l})}),R=r.forwardRef(function({options:a=null,className:n="",isFocused:s=!1,...g},o){const l=o||r.useRef();return r.useEffect(()=>{s&&l.current.focus()},[]),e.jsx("select",{...g,className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm "+n,ref:l,children:a.map(m=>e.jsx("option",{value:m,children:m},m))})});function z({className:c="",disabled:a,children:n,...s}){return e.jsx("button",{...s,className:`inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150 ${a&&"opacity-25"} `+c,disabled:a,children:n})}function te({auth:c,books:a,message:n}){const{t:s}=_(),[g,o]=r.useState(!1),[l,m]=r.useState(!1),j=r.useRef(),y=r.useRef(),b=r.useRef(),N=r.useRef(),{data:i,setData:d,delete:I,post:D,put:E,processing:v,reset:p,errors:u}=V({password:"",title:"",content:"",category:""}),U=()=>{o(!0)},T=(t,A,L,P)=>{d({id:t,title:A,content:L,category:P}),m(!0)},q=t=>{t.preventDefault(),D(route("books.store"),{preserveScroll:!0,onSuccess:()=>f(),onError:()=>j.current.focus(),onFinish:()=>p()})},F=t=>{t.preventDefault(),E(route("books.update",i.id),{preserveScroll:!0,onSuccess:()=>h(),onError:()=>j.current.focus(),onFinish:()=>p()})},M=t=>{confirm("このアイテムを削除してもよろしいですか？")&&I(route("books.destroy",t),{preserveScroll:!0,onFinish:()=>p()})},f=()=>{o(!1),p()},h=()=>{m(!1),p()};return e.jsxs(G,{user:c.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:s("Books")}),children:[e.jsx($,{title:"Books"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx(B,{onClick:U,children:"登録"}),e.jsx(C,{show:g,onClose:f,children:e.jsxs("form",{onSubmit:q,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"新しいアイテムを追加しますか？"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600"}),e.jsxs("div",{className:"mt-6",children:[e.jsx(w,{id:"title",type:"text",name:"title",ref:y,value:i.title,onChange:t=>d("title",t.target.value),className:"mt-1 block w-3/4",placeholder:s("title")}),e.jsx(x,{message:u.title,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(S,{id:"content",type:"text",name:"content",ref:b,value:i.content,onChange:t=>d("content",t.target.value),className:"mt-1 block w-3/4",placeholder:"内容"}),e.jsx(x,{message:u.content,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(R,{id:"category",name:"category",ref:N,value:i.category,required:"required",onChange:t=>d("category",t.target.value),className:"mt-1 block w-3/4",options:["選択してください","React","Vue","Laravel"],children:" "}),e.jsx(x,{message:u.category,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(k,{onClick:f,children:s("Cancel")}),e.jsx(B,{className:"ms-3",disabled:v,children:"登録"})]})]})}),e.jsx(C,{show:l,onClose:h,children:e.jsxs("form",{onSubmit:F,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"内容を更新しますか？"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600"}),e.jsxs("div",{className:"mt-6",children:[e.jsx(w,{id:"title",type:"text",name:"title",ref:y,value:i.title,onChange:t=>d("title",t.target.value),className:"mt-1 block w-3/4",isFocused:!0,placeholder:"title"}),e.jsx(x,{message:u.title,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(S,{id:"content",type:"text",name:"content",ref:b,value:i.content,onChange:t=>d("content",t.target.value),className:"mt-1 block w-3/4",placeholder:"content"}),e.jsx(x,{message:u.content,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(R,{id:"category",name:"category",ref:N,value:i.category,required:"required",onChange:t=>d("category",t.target.value),className:"mt-1 block w-3/4",options:["","React","Vue","Laravel"]}),e.jsx(x,{message:u.category,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(k,{onClick:h,children:s("Cancel")}),e.jsx(Y,{className:"ml-3",disabled:v,children:"更新"})]})]})}),n&&e.jsx("div",{className:"mt-2 text-blue-900  bg-green-100 p-3 rounded-lg text-center font-bold",children:n}),e.jsx("div",{children:e.jsxs("table",{className:"w-full bg-gray-100 mt-2",children:[e.jsx("thead",{className:"bg-blue-100",children:e.jsxs("tr",{className:"text-green-600",children:[e.jsx("th",{className:"px-2 py-2 border border-gray-400",children:"#"}),e.jsx("th",{className:"px-2 py-2 border border-gray-400",children:"タイトル"}),e.jsx("th",{className:"px-2 py-2 border border-gray-400",children:"内容"}),e.jsx("th",{className:"px-2 py-2 border border-gray-400",children:"カテゴリー"}),e.jsx("th",{className:"px-2 py-2 border border-gray-400"}),e.jsx("th",{className:"px-2 py-2 border border-gray-400"})]})}),e.jsx("tbody",{className:"bg-white",children:a.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:t.id}),e.jsx("td",{className:"border border-gray-400 px-2 py-2",children:t.title}),e.jsx("td",{className:"border border-gray-400 px-2 py-2",children:t.content}),e.jsx("td",{className:"border border-gray-400 px-2 py-2",children:t.category}),e.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:e.jsx(z,{onClick:()=>T(t.id,t.title,t.content,t.category),children:"編集"})}),e.jsx("td",{className:"border border-gray-400 px-2 py-2 text-center",children:e.jsx(W,{onClick:()=>M(t.id),children:"削除"})})]},t.id))})]})})]})})]})}export{te as default};
